[phases.setup]
nixPkgs = ["nodejs-18_x", "nginx"]
aptPkgs = ["curl", "wget"]

[phases.build]
dependsOn = ["install"]
cmds = ["npm install && npm run build"]

[start]
cmd = "[[ -z \"${PORT}\" ]] && echo \"Environment variable PORT not found. Using PORT 80\" || sed -i \"s/0.0.0.0:80/$PORT/g\" /assets/nginx.conf && nginx -c /assets/nginx.conf"